<!-- signup.component.html -->

<div class="container-fluid px-0">
    <div class="min-vh-100 d-flex align-items-center justify-content-center px-3" style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);">
        <div class="row justify-content-center w-100 m-0">
            <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5">
                <div class="card welcome-container border-0 shadow-lg">
                    <div class="card-body p-4 p-md-5">
                        <h3 class="card-title text-center mb-4">
                            <span class="display-6 fw-bold gradient-text">Crear Cuenta</span>
                        </h3>
                        
                        <form [formGroup]="registroForm" (ngSubmit)="onSubmit()">
                            <!-- Campo Nombre -->
                            <div class="mb-4">
                                <label for="nombre" class="form-label text-white-75 mb-2">
                                    <i class="fas fa-user me-2"></i>Nombre completo
                                </label>
                                <input 
                                    type="text" 
                                    class="form-control form-control-lg" 
                                    id="nombre" 
                                    formControlName="nombre"
                                    [class.is-invalid]="registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched"
                                    placeholder="Tu nombre completo"
                                    required
                                >
                                @if (registroForm.get('nombre')?.invalid && registroForm.get('nombre')?.touched) {
                                    <div class="invalid-feedback d-block">
                                        <i class="fas fa-exclamation-circle me-1"></i>El nombre es requerido
                                    </div>
                                }
                            </div>

                            <!-- Campo Email -->
                            <div class="mb-4">
                                <label for="email" class="form-label text-white-75 mb-2">
                                    <i class="fas fa-envelope me-2"></i>Correo electrónico
                                </label>
                                <input 
                                    type="email" 
                                    class="form-control form-control-lg" 
                                    id="email" 
                                    formControlName="email"
                                    [class.is-invalid]="registroForm.get('email')?.invalid && registroForm.get('email')?.touched"
                                    placeholder="tucorreo@ejemplo.com"
                                    required
                                >
                                @if (registroForm.get('email')?.invalid && registroForm.get('email')?.touched) {
                                    <div class="invalid-feedback d-block">
                                        <i class="fas fa-exclamation-circle me-1"></i>Correo electrónico inválido
                                    </div>
                                }
                            </div>

                            <!-- Campo Contraseña -->
                            <div class="mb-4">
                                <label for="contraseña" class="form-label text-white-75 mb-2">
                                    <i class="fas fa-lock me-2"></i>Contraseña
                                </label>
                                <div class="input-group">
                                    <input 
                                        [type]="mostrarPassword ? 'text' : 'password'" 
                                        class="form-control form-control-lg" 
                                        id="password" 
                                        formControlName="password"
                                        [class.is-invalid]="registroForm.get('password')?.invalid && registroForm.get('password')?.touched"
                                        placeholder="Mínimo 6 caracteres"
                                        required
                                    >
                                    <button 
                                        class="btn btn-outline-light" 
                                        type="button" 
                                        (click)="alternarVisibilidadPassword()"
                                    >
                                        <i class="fas" [class.fa-eye]="!mostrarPassword" [class.fa-eye-slash]="mostrarPassword"></i>
                                    </button>
                                </div>
                                @if (registroForm.get('password')?.invalid && registroForm.get('password')?.touched) {
                                    <div class="invalid-feedback d-block">
                                        <i class="fas fa-exclamation-circle me-1"></i>La contraseña debe tener al menos 6 caracteres
                                    </div>
                                }
                            </div>

                            <!-- Confirmar Contraseña -->
                            <div class="mb-4">
                                <label for="confirmarContraseña" class="form-label text-white-75 mb-2">
                                    <i class="fas fa-lock me-2"></i>Confirmar Contraseña
                                </label>
                                <input 
                                    type="password" 
                                    class="form-control form-control-lg" 
                                    id="confirmarContraseña" 
                                    formControlName="confirmarContraseña"
                                    [class.is-invalid]="registroForm.get('confirmarContraseña')?.invalid && registroForm.get('confirmarContraseña')?.touched"
                                    placeholder="Repite tu contraseña"
                                    required
                                >
                                @if (registroForm.get('confirmarContraseña')?.invalid && registroForm.get('confirmarContraseña')?.touched) {
                                    <div class="invalid-feedback d-block">
                                        <i class="fas fa-exclamation-circle me-1"></i>Las contraseñas no coinciden
                                    </div>
                                }
                            </div>

                            <!-- Términos y condiciones -->
                            <div class="mb-4 form-check">
                                <input 
                                    type="checkbox" 
                                    class="form-check-input" 
                                    id="terminos" 
                                    formControlName="terminos"
                                >
                                <label class="form-check-label text-white-75" for="terminos">
                                    Acepto los <a href="#" class="text-decoration-none gradient-text">Términos y Condiciones</a>
                                </label>
                                @if (registroForm.get('terminos')?.invalid && registroForm.get('terminos')?.touched) {
                                    <div class="invalid-feedback d-block">
                                        <i class="fas fa-exclamation-circle me-1"></i>Debes aceptar los términos y condiciones
                                    </div>
                                }
                            </div>

                            <!-- Botón de envío -->
                            <button 
                                type="submit" 
                                class="btn btn-primary btn-lg w-100 rounded-pill py-3 mb-3"
                                [disabled]="registroForm.invalid || cargando"
                            >
                                @if (cargando) {
                                    <span class="spinner-border spinner-border-sm me-2"></span>
                                } @else {
                                    <i class="fas fa-user-plus me-2"></i>
                                }
                                Crear Cuenta
                            </button>

                            <!-- Enlace a login -->
                            <div class="text-center mt-3">
                                <p class="text-white-75 mb-2">¿Ya tienes una cuenta?</p>
                                <a routerLink="/login" class="text-decoration-none fw-bold gradient-text">
                                    Inicia Sesión aquí
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>